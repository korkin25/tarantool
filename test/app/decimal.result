decimal = require('decimal')
---
...
test_run = require('test_run').new()
---
...
-- check various constructors
decimal.tonumber('1234.5678')
---
- '1234.5678'
...
decimal.tonumber('1e6')
---
- '1000000'
...
decimal.tonumber('-6.234612e2')
---
- '-623.4612'
...
decimal.tonumber(tonumber64(2^63))
---
- '9223372036854775808.000000000000000'
...
decimal.tonumber(12345678ULL)
---
- '12345678'
...
decimal.tonumber(-12345678LL)
---
- '-12345678'
...
decimal.tonumber(1)
---
- '1.000000000000000'
...
decimal.tonumber(-1)
---
- '-1.000000000000000'
...
decimal.tonumber(2^64)
---
- '18446744073709551616.000000000000000'
...
decimal.tonumber(2^(-20))
---
- '0.000000953674316'
...
a = decimal.tonumber('100')
---
...
a:log10()
---
- '2'
...
a:ln()
---
- '4.6051701859880913680359829093687284152'
...
-- overflow, e^100 > 10^38
a:exp()
---
- error: Operation failed
...
-- e^87 < 10^38, no overflow, but rounds
-- to 0 digits after the decimal point.
decimal.tonumber(87):exp()
---
- '60760302250568721495223289381302760753'
...
a:sqrt()
---
- '10'
...
a
---
- '100'
...
a = decimal.tonumber('-123.456')
---
...
a:round(2)
---
- '-123.46'
...
a:round(1)
---
- '-123.5'
...
a:round(0)
---
- '-123'
...
a:abs()
---
- '123.456'
...
a:tostring()
---
- '-123.456'
...
-a
---
- '123.456'
...
a / 10
---
- '-12.3456'
...
a * 5
---
- '-617.280000000000000000'
...
a + 17
---
- '-106.456000000000000'
...
a - 0.0001
---
- '-123.456100000000000'
...
a ^ 2
---
- '15241.383936'
...
a:abs() ^ 0.5
---
- '11.111075555498666484621494041182192341'
...
a:abs() ^ 0.5 == a:abs():sqrt()
---
- true
...
a - 2 < a - 1
---
- true
...
a + 1e-10 > a
---
- true
...
a <= a
---
- true
...
a >= a
---
- true
...
a == a
---
- true
...
decimal.tostring(a)
---
- '-123.456'
...
a:tostring()
---
- '-123.456'
...
decimal.abs(a)
---
- '123.456'
...
decimal.minus(a)
---
- '123.456'
...
decimal.round(a, 2)
---
- '-123.46'
...
